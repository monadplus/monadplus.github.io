
<!doctype html>














<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



  
  
    
    
  <script src="/assets/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/assets/lib/pace/pace-theme-center-simple.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/assets/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/assets/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/assets/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Game Boy Advance,Hardware,Retro Gaming," />





  <link rel="alternate" href="/atom.xml" title="Monad+" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico?v=5.1.1" />
















<meta name="description" content="In this post we will learn step by step how to restore and improve an old Game Boy Advance.">
<meta name="keywords" content="Game Boy Advance, Hardware, Retro Gaming">
<meta property="og:type" content="article">
<meta property="og:title" content="Modding a Game Boy Advance">
<meta property="og:url" content="http://localhost:4000/modding/2024/03/28/gba-mod/">
<meta property="og:site_name" content="Monad+">
<meta property="og:description" content="In this post we will learn step by step how to restore and improve an old Game Boy Advance.">
<meta property="og:locale" content="en">
<meta property="og:image" content="/assets/images/gba_mod/GBA_1.jpg">
<meta property="og:image" content="/assets/images/gba_mod/GBA_2.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328123418.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328123732.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328123858.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328123943.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328124830.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328125207.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328125355.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328125641.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328130208.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328132236.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240327155543.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328130900.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328135250.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328140029.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328140729.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328140735.jpg">
<meta property="og:image" content="/assets/images/gba_mod/IMG20240328140550.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Modding a Game Boy Advance">
<meta name="twitter:description" content="In this post we will learn step by step how to restore and improve an old Game Boy Advance.">
<meta name="twitter:image" content="/assets/images/gba_mod/GBA_1.jpg">


<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":0,"b2t":true,"scrollpercent":true},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://localhost:4000/"/>





  <title>Modding a Game Boy Advance | Monad+</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '{"tracking_id"=>"UA-160258919-2", "only_pageview"=>true}', 'auto');
  ga('send', 'pageview');
</script>













</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Monad+</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">A blog about functional programming</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

<div id="posts" class="posts-expand">
  
  

  

  
  
  

  <article class="post post-type- " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://localhost:4000/modding/2024/03/28/gba-mod/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Arnau Abella">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/assets/images/portrait.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Monad+">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
          
          
            Modding a Game Boy Advance
          
        </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2024-03-28T00:00:00+01:00">
                2024-03-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/category/#/Modding" itemprop="url" rel="index">
                    <span itemprop="name">Modding</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/modding/2024/03/28/gba-mod/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="/modding/2024/03/28/gba-mod/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          
            
          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
  
  












  <p>How to restore and mod a Game Boy Advance (GBA) step by step.</p>

<table>
  <tbody>
    <tr>
      <td><img src="/assets/images/gba_mod/GBA_1.jpg" alt="Two modded GBA front view" /></td>
      <td><img src="/assets/images/gba_mod/GBA_2.jpg" alt="Two modded GBA back view" /></td>
    </tr>
  </tbody>
</table>

<h2 id="preparation">Preparation</h2>

<p>We’ll need the following material:</p>
<ul>
  <li>A donor GBA: the internals must be in good shape. The exterior state (including screen) doesn’t matter because we are going to replace it.</li>
  <li><a href="https://funnyplaying.com/products/3-0-inch-ips-agb-laminated-kit">3.0 Inch IPS AGB Laminated Kit: Display + Shell</a></li>
  <li><a href="https://funnyplaying.com/products/gba-li-ion-rechargeable-battery-typec-module">GBA Li-Ion Rechargeable Battery USB-C Module</a></li>
  <li><a href="https://funnyplaying.com/products/clear-gba-speaker">Clear GBA Speaker</a></li>
  <li><a href="https://funnyplaying.com/products/replacement-silicone-pads-for-gameboy-advance">GBA Replacement Silicone Pads</a></li>
  <li><a href="https://funnyplaying.com/products/agb-custom-buttons">GBA Custom Buttons</a></li>
  <li><a href="https://www.ifixit.com/products/mako-driver-kit-64-precision-bits">Screwdrivers (Philips, tri-point and flathead)</a></li>
  <li>Soldering iron, flux, and tin wire.</li>
  <li>Isopropyl alcohol 99%, brush, and microfiber cloth</li>
  <li>Kopton tape</li>
</ul>

<h2 id="preparing-the-motherboard">Preparing the motherboard</h2>

<p>The first step is to retrieve the motherboard from our donor GBA.</p>

<p><img src="/assets/images/gba_mod/IMG20240328123418.jpg" alt="GBA backside" /></p>

<p>Open the back cover of your GBA by unscrewing the 6 tri-point screws and the philips screw on the bottom of the battery compartment.
I suggest using a flathead tip for the philips screw because it’s quite soft and easy to deform its shape.</p>

<p>The motherboard may be a bit dirty, but do not worry, we’ll clean it later.</p>

<p><img src="/assets/images/gba_mod/IMG20240328123732.jpg" alt="motherboard backside" /></p>

<p>The Game Boy Advance had several hardware revisions during the years, but the relevant change for us is the connector for the display.
The <code class="language-plaintext highlighter-rouge">3.0 Inch IPS AGB Laminated Kit</code> is compatible with both a 32-pin and a 40-pin connector screen connector.
My GBA has revision <code class="language-plaintext highlighter-rouge">10 1-1</code> (see under the cartridge), and uses the 32-pin connector. If your revision starts with <code class="language-plaintext highlighter-rouge">0</code> that means that your GBA uses the 40-pin connector. This information will be used in a following step.</p>

<p><img src="/assets/images/gba_mod/IMG20240328123858.jpg" alt="GBA motherboard backside" /></p>

<p>Next, we need to detach the display connector. Release the plastic holder by pulling up both sides and gently release the orange ribbon from the connector. Then, unscrew the 2 or 3 philips screws that hold the motherboard to the front shell.</p>

<p><img src="/assets/images/gba_mod/IMG20240328123943.jpg" alt="GBA motherboard frontside" /></p>

<p>Before cleaning the motherboard, we’ll replace the speaker by the next one.
Desolder the old one and solder the new one.</p>

<p><img src="/assets/images/gba_mod/IMG20240328124830.jpg" alt="GBA speaker" /></p>

<p>Now, we can clean all the dust and oxide from the motherboard. We’ll spray the motherboard with the isopropyl alcohol and brush the surface gently. Clean both sides of the motherboard. Do not worry, the isopropyl alcohol will evaporate and will not damage the electronic components.</p>

<p><img src="/assets/images/gba_mod/IMG20240328125207.jpg" alt="GBA clean motherboard" /></p>

<h2 id="modding-our-gba">Modding our GBA</h2>

<p>The second step is to build a functional GBA on our new shell and IPS display.</p>

<p><img src="/assets/images/gba_mod/IMG20240328125355.jpg" alt="GBA shell" /> 
<img src="/assets/images/gba_mod/IMG20240328125641.jpg" alt="GBA IPS display" /></p>

<p>First, we’ll prepare our IPS display by soldering the wires that will connect to the motherboard to control the OSD menu of the display.</p>

<p><img src="/assets/images/gba_mod/IMG20240328130208.jpg" alt="GBA IPS display ribbon" /></p>

<p>Then, I recommend covering with Kopton tape the pins of the connector that we are not going to use. In my case, the 40-pin connector.</p>

<p>Next, we’ll remove the plastic cover from the display and place the display on our front shell.</p>

<p><img src="/assets/images/gba_mod/IMG20240328132236.jpg" alt="GBA front shell ribbon" /></p>

<p>Then, we’ll attach the display ribbon to the display board. There’s a small lid that has to be open before inserting the ribbon and has to be closed afterwards. I recommend sticking the board to the screen’s backplate with double-sided tape. The touch sensor must be attached to the bottom of the screen with Kopton tape. Don’t forget to place the holding bracket to fix the screen in place.</p>

<p>The next step is to solder the wires to the GBA motherboard.</p>

<p><img src="/assets/images/gba_mod/IMG20240327155543.jpg" alt="GBA wire soldering" /></p>

<p>The above picture is from another mod (I forgot to take pictures) but the pins to solder the wires are the same:
<strong>S</strong> must be soldered to <code class="language-plaintext highlighter-rouge">TP2</code>, <strong>L</strong> to <code class="language-plaintext highlighter-rouge">TP9</code>, and <strong>R</strong> to <code class="language-plaintext highlighter-rouge">TP8</code>.</p>

<blockquote>
  <p>Some IPS kits require 40-pins motherboards to remove the <code class="language-plaintext highlighter-rouge">C54</code> capacitor.</p>
</blockquote>

<p><img src="/assets/images/gba_mod/IMG20240328130900.jpg" alt="GBA back shell ribbon" /></p>

<blockquote>
  <p>The above picture is just an example on how the ribbon is connected to the motherboard, it is missing the folding and twisting of the ribbon.</p>
</blockquote>

<p>Finally, we need to connect the 32-pin connector to the GBA motherboard. In order to do that, you have to twist the ribbon with the 32-pin connector 180°, and connect it to the GBA motherboard.</p>

<p>It is time to put the buttons and pads on their respective places. Both are designed to only fit in a specific position and orientation. Don’t forget to insert the power led plastic diffuser.</p>

<p>The next step is the most challenging part of the process, so stay calm and repeat it as many times as needed.
Fold both parts by the ribbon to place the motherboard on top of the frontside shell. Make sure that the speaker is properly placed and the wires are not blocking the contact between the buttons and the motherboard pats. Using Kopton tape to fix some of the moving parts may help during the process.</p>

<p><img src="/assets/images/gba_mod/IMG20240328135250.jpg" alt="GBA motherboard mounted on front shell" /></p>

<p>Screw the motherboard to the front shell and make sure everything fits by checking that the shell makes contact with the audio jack, the volume wheel and the top external connector.</p>

<p><img src="/assets/images/gba_mod/IMG20240328140029.jpg" alt="GBA backside shell closed" /></p>

<p>Finally, put the remaining buttons (bumpers, triggers, and power switch cover) on the shell and put the back shell on top of it. Make sure to screw the shell so all connectors make proper contact before testing.</p>

<p>Now it is a good time to test your GBA. Put the batteries back, turn it on and test that all buttons still work.</p>

<p><img src="/assets/images/gba_mod/IMG20240328140729.jpg" alt="GBA screen test 1" /></p>

<p>You can test the touch sensor by pressing the bottom of the screen. A single-tap should increase the brightness and a long-tap should display the OSD menu (see <a href="https://www.youtube.com/shorts/IqRYh-b76Pw">demo</a>).</p>

<p><img src="/assets/images/gba_mod/IMG20240328140735.jpg" alt="GBA screen test 2" /></p>

<p>You can test the soldered controllers by holding ‘select’ for 2 seconds to display the OSD menu and using the triggers to increase and decrease the different values (see <a href="https://www.youtube.com/shorts/-Ox0G2bGdoY">demo</a>).</p>

<h2 id="rechargeable-battery">Rechargeable battery</h2>

<p>The final step is to replace the AA batteries by a rechargeable USB-C battery.</p>

<p><img src="/assets/images/gba_mod/IMG20240328140550.jpg" alt="GBA rechargeable battery" /></p>

<p>First, attach the heatsink to the battery pcb and connect to battery power connector to the board.
Then, remove the left contact from the GBA AA batteries slot. 
I used the flathead screwdriver to push from the bottom of the contact.
And finally put the rechargeable battery in the batteries compartment.
Make sure the battery cable is placed inside the left contact cavity.
Put the cover. You may need to move the battery a bit to make it fit in the right place to close the cover.</p>

<p>Time to enjoy your modded GBA!</p>

<h2 id="resources">Resources</h2>

<ul>
  <li>Retro gaming provider: <a href="https://funnyplaying.com/">https://funnyplaying.com/</a></li>
  <li>Video guide (from another author): <a href="https://www.youtube.com/watch?v=BpX-2aeTXL4">https://www.youtube.com/watch?v=BpX-2aeTXL4</a></li>
</ul>


      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            
            <a href="/tag/#/Game%20Boy%20Advance" rel="tag"># Game Boy Advance</a>
          
            
            <a href="/tag/#/Hardware" rel="tag"># Hardware</a>
          
            
            <a href="/tag/#/Retro%20Gaming" rel="tag"># Retro Gaming</a>
          
        </div>
      

      
      
      
      
      

      
      
        <div class="post-nav" id="post-nav-id">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/haskell/2022/04/19/free-interpreter/" rel="prev" title="Free monads in the real world">
                Free monads in the real world <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      
      

      
    </footer>
  </article>

  <div class="post-spread">
    
  </div>
</div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          

  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        
        
        







      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/assets/images/portrait.png"
               alt="Arnau Abella" />
          <p class="site-author-name" itemprop="name">Arnau Abella</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
        
        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              
              
              <span class="links-of-author-item">
                <a href="https://github.com/monadplus" target="_blank" title="github">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  github
                </a>
              </span>
            
              
              
              <span class="links-of-author-item">
                <a href="https://twitter.com/monadplus" target="_blank" title="twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  twitter
                </a>
              </span>
            
              
              
              <span class="links-of-author-item">
                <a href="mailto:arnau.abella@monadplus.pro" target="_blank" title="mail">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                  mail
                </a>
              </span>
            
              
              
              <span class="links-of-author-item">
                <a href="/assets/documents/cv.pdf" target="_blank" title="cv">
                  
                    <i class="fa fa-fw fa-book"></i>
                  
                  cv
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            








            
              <div class="post-toc-content">
    <ol class=nav>
      <li class="nav-item nav-level-2"> <a class="nav-link" href="#preparation"> <span class="nav-number">1</span> <span class="nav-text">Preparation</span> </a> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#preparing-the-motherboard"> <span class="nav-number">2</span> <span class="nav-text">Preparing the motherboard</span> </a> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#modding-our-gba"> <span class="nav-number">3</span> <span class="nav-text">Modding our GBA</span> </a> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#rechargeable-battery"> <span class="nav-number">4</span> <span class="nav-text">Rechargeable battery</span> </a> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#resources"> <span class="nav-number">5</span> <span class="nav-text">Resources</span> </a> </li>
    </ol>
  </div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>

        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Arnau Abella</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://jekyllrb.com">Jekyll</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/simpleyyt/jekyll-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





















  
   
  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/jquery/index.js?v=2.1.3"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/assets/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/assets/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/assets/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/assets/js/src/schemes/pisces.js?v=5.1.1"></script>



  <script type="text/javascript" src="/assets/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/assets/js/src/post-details.js?v=5.1.1"></script>


  


  <script type="text/javascript" src="/assets/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://monadplus.disqus.com/count.js" async></script>
    

    
      
      <script type="text/javascript">
          var disqus_config = function () {
              this.page.url = 'http://localhost:4000/modding/2024/03/28/gba-mod/';
              this.page.identifier = '/modding/2024/03/28/gba-mod/';
              this.page.title = 'Modding a Game Boy Advance';
          };
          var d = document, s = d.createElement('script');
          s.src = 'https://monadplus.disqus.com/embed.js';
          s.setAttribute('data-timestamp', '' + +new Date());
          (d.head || d.body).appendChild(s);
      </script>
      
    

  











  







  


  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('-1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  


  
  
    <script type="text/x-mathjax-config">
     MathJax.Hub.Config({
       tex2jax: {
         inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
         processEscapes: true,
         skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
       }
     });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>

